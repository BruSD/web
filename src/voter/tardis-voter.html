<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout-classes.html">

<link rel="import" href="../../bower_components/iron-pages/iron-pages.html">

<link rel="import" href="tardis-session-selector.html">
<link rel="import" href="tardis-session-voter.html">

<dom-module id="tardis-voter">
  <template>
    <style include="iron-flex">
      :host {
        display: block;
      }
    </style>

    <app-route
      route="{{route}}"
      pattern="/:id"
      data="{{routeData}}"></app-route>

    <app-route
      route="{{route}}"
      pattern="/"
      data="{{routeData}}"></app-route>

    <iron-pages role="main" selected="[[page]]" attr-for-selected="name">
      <tardis-session-selector name="selector"></tardis-session-selector>
      <tardis-session-voter name="voter" id="[[routeData.id]]"></tardis-session-voter>
    </iron-pages>
  </template>

  <script>
    Polymer({
      is: 'tardis-voter',

      properties: {
        sessionId: {
          type: String,
          value: '101'
        },
        page: String
      },
//
//      ready: function () {
//        this.votesRef = firebase.app('tardis').database().ref('/votes/' + this.sessionId);
//      },

      observers: [
        '_routePageChanged(route)'
      ],

      _routePageChanged: function(route) {
        this.page = route.path ? 'voter' : 'selector';
      }
    });
  </script>
</dom-module>
